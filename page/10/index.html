<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/10/"/>





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/30/solve-the-problem-that-yum-can-t-use-after-python-upgrade-to-2-5-high/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/30/solve-the-problem-that-yum-can-t-use-after-python-upgrade-to-2-5-high/" itemprop="url">解决Python升级为2.5高版本后yum不能使用的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-30T10:35:10+08:00">
                2010-11-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p># yum<br>There was a problem importing one of the Python modules<br>required to run yum. The error leading to this problem was:  </p>
<p>   No module named yum  </p>
<p>Please install a package which provides this module, or<br>verify that the module is installed correctly.  </p>
<p>It’s possible that the above module doesn’t match the<br>current version of Python, which is:<br>2.4.3 (#1, Oct 14 2009, 01:52:50)<br>[GCC 4.1.2 20080704 (Red Hat 4.1.2-44)]  </p>
<p>If you cannot solve this problem yourself, please go to<br>the yum faq at:  </p>
<p><a href="http://wiki.linux.duke.edu/YumFaq" target="_blank" rel="noopener">http://wiki.linux.duke.edu/YumFaq</a></p>
<p>=======================</p>
<p>直接修改 vim /usr/bin/yum<br>将 #!/usr/bin/python 修改为 #!/usr/bin/python2.4</p>
<p>上面是假设你是从2.4升级到 2.5</p>
<p>其实这个时候 你可以 ls /usr/lib/python2.4/site-packages/yum<br>这个文件夹是否存在的</p>
<p>然后  /usr/bin/python2.4<br>Python 2.4.3 (#1, May 24 2008, 13:47:28)<br>[GCC 4.1.2 20070626 (Red Hat 4.1.2-14)] on linux2<br>Type “help”, “copyright”, “credits” or “license” for more information.  </p>
<blockquote>
<blockquote>
<p>> import yum</p>
</blockquote>
</blockquote>
<p>成功鸟</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/29/configure-nginx-to-be-the-url-hash-forwarding-method/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/29/configure-nginx-to-be-the-url-hash-forwarding-method/" itemprop="url">将nginx配置成url_hash转发方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-29T11:31:42+08:00">
                2010-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>所需软件名称及版本：<br>pcre-8.02.tar.gz<br>nginx-0.7.58.tar.gz<br>Nginx_upstream_hash-0.3.1.tar.gz</p>
<p>1、安装pcre</p>
<p>Java代码</p>
<ol>
<li>tar -zxvf pcre-8.02.tar.gz  </li>
<li>cd pcre-8.02/  </li>
<li>./configure  </li>
<li>make &amp;&amp; make install   </li>
</ol>
<p>tar -zxvf pcre-8.02.tar.gz cd pcre-8.02/ ./configure make &amp;&amp; make install </p>
<p>2、给nginx安装url_hash补丁</p>
<p>Java代码</p>
<ol>
<li>tar -zxvf nginx-0.7.58.tar.gz  </li>
<li>tar -zxvf Nginx_upstream_hash-0.3.1.tar.gz  </li>
<li>cd nginx-0.7.58/  </li>
<li>patch -p0 &lt; /var/tmp/loojoy/nginx_upstream_hash-0.3.1/nginx.patch  </li>
</ol>
<p>tar -zxvf nginx-0.7.58.tar.gz tar -zxvf Nginx_upstream_hash-0.3.1.tar.gz cd nginx-0.7.58/ patch -p0 &lt; /var/tmp/loojoy/nginx_upstream_hash-0.3.1/nginx.patch</p>
<p>3、安装nginx</p>
<p>Java代码</p>
<ol>
<li>groupadd www  </li>
<li>useradd www -g www  </li>
<li>./configure –prefix=/usr/local/webserver/nginx \  </li>
<li>–user=www \  </li>
<li>–group=www \  </li>
<li>–add-module=/var/tmp/loojoy/nginx_upstream_hash-0.3.1 \  </li>
<li>–with-http_ssl_module \  </li>
<li>–with-http_stub_status_module   </li>
</ol>
<p>groupadd www useradd www -g www ./configure –prefix=/usr/local/webserver/nginx \ –user=www \ –group=www \ –add-module=/var/tmp/loojoy/nginx_upstream_hash-0.3.1 \ –with-http_ssl_module \ –with-http_stub_status_module </p>
<p>4、检查nginx生成的配置文件是否正确</p>
<p>Java代码</p>
<ol>
<li><p>/usr/local/webserver/nginx/sbin/nginx -t  </p>
<p>/usr/local/webserver/nginx/sbin/nginx -t </p>
<p>5、启动nginx<br>若nginx.conf检查通过，则启动nginx。</p>
</li>
</ol>
<p>Java代码</p>
<ol>
<li>/usr/local/webserver/nginx/sbin/nginx  </li>
</ol>
<p>/usr/local/webserver/nginx/sbin/nginx </p>
<p>6、查看端口80<br>netstat -ant</p>
<p>7、通过浏览器访问：<br><a href="http://your_nginx_server_ip/" target="_blank" rel="noopener">http://your_nginx_server_ip/</a><br>若可以正常访问，则nginx安装成功。</p>
<p>8、修改nginx的配置文件如下:</p>
<p>Java代码</p>
<ol>
<li>——————-[S]url_hash转发方式nginx.conf[S]——————–  </li>
<li>user www www;  </li>
<li>worker_processes 10;  </li>
<li>error_log logs/error.log;  </li>
<li>#error_log logs/error.log notice;  </li>
<li>#error_log logs/error.log info;  </li>
<li>#pid        logs/nginx.pid;  </li>
<li>worker_rlimit_nofile 51200;           </li>
<li>events  </li>
<li>{  </li>
<li>use epoll;  </li>
<li>worker_connections 51200;  </li>
<li><p>}  </p>
</li>
<li><p>http  </p>
</li>
<li>{  </li>
<li>include       mime.types;  </li>
<li>default_type application/octet-stream;  </li>
<li>keepalive_timeout 120;  </li>
<li><p>tcp_nodelay on;  </p>
</li>
<li><p>upstream your.website.name{  </p>
</li>
<li>server   your.tomcat.server.ip1:8080 ;  </li>
<li><p>server   your.tomcat.server.ip1:8080 ;  </p>
</li>
<li><p>hash $request_uri;                   </p>
</li>
<li><p>}  </p>
</li>
<li><p>server  </p>
</li>
<li>{  </li>
<li>listen 80;  </li>
<li><p>server_name your.website.name;  </p>
</li>
<li><p>location / {  </p>
</li>
<li>proxy_pass        <a href="http://your.website.name" target="_blank" rel="noopener">http://your.website.name</a>;</li>
<li>proxy_set_header   Host             $host;  </li>
<li>proxy_set_header   X-Real-IP        $remote_addr;  </li>
<li>proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;  </li>
<li><p>}  </p>
</li>
<li><p>log_format www_gjw_com ‘$remote_addr - $remote_user [$time_local] $request ‘</p>
</li>
<li>‘“$status” $body_bytes_sent “$http_referer” ‘</li>
<li>‘“$http_user_agent” “$http_x_forwarded_for”‘;  </li>
<li><p>#access_log /data1/logs/<a href="http://www.log" target="_blank" rel="noopener">www.log</a> www_gjw_com;  </p>
</li>
<li><p>location /nginx_status {  </p>
</li>
<li>stub_status on;                                  </li>
<li>access_log   off;  </li>
<li>}  </li>
<li>}  </li>
<li><p>}        </p>
</li>
<li><p>——————-[E]url_hash转发方式nginx.conf[E]——————–  </p>
</li>
</ol>
<p>——————-[S]url_hash转发方式nginx.conf[S]——————– user www www; worker_processes 10; error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; #pid        logs/nginx.pid; worker_rlimit_nofile 51200;          events {       use epoll;       worker_connections 51200; }  http {       include       mime.types;       default_type application/octet-stream;       keepalive_timeout 120;       tcp_nodelay on;        upstream your.website.name{               server   your.tomcat.server.ip1:8080 ;               server   your.tomcat.server.ip1:8080 ;                hash $request_uri;                        }        server       {               listen 80;               server_name your.website.name;                location / {                        proxy_pass        <a href="http://your.website.name" target="_blank" rel="noopener">http://your.website.name</a>;                        proxy_set_header   Host             $host;                        proxy_set_header   X-Real-IP        $remote_addr;                        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;               }                log_format www_gjw_com ‘$remote_addr - $remote_user [$time_local] $request ‘                                 ‘“$status” $body_bytes_sent “$http_referer” ‘                                 ‘“$http_user_agent” “$http_x_forwarded_for”‘;               #access_log /data1/logs/<a href="http://www.log" target="_blank" rel="noopener">www.log</a> www_gjw_com;                location /nginx_status {                    stub_status on;                                                    access_log   off;               }    } }        ——————-[E]url_hash转发方式nginx.conf[E]——————– </p>
<p>9、添加nginx启动、关闭、重启脚本</p>
<p>Java代码</p>
<ol>
<li><p>——————-[S]url_hash转发方式nginx启动、关闭脚本[S]——————–  </p>
</li>
<li><p>#!/bin/sh  </p>
</li>
<li><p>CWD=`pwd`     </p>
</li>
<li><p>case $1 in  </p>
</li>
<li>start)  </li>
<li>/usr/local/webserver/nginx/sbin/nginx  </li>
<li>;;  </li>
<li>stop)  </li>
<li>kill -2 <code>ps -ef|grep &quot;/usr/local/webserver/nginx/sbin/nginx&quot;|grep -v &quot;grep&quot;|awk &#39;{print $2}&#39;</code>  </li>
<li>;;  </li>
<li>restart)  </li>
<li>cd “$CMD”</li>
<li>$0 stop  </li>
<li>$0 start  </li>
<li>;;  </li>
<li>*)  </li>
<li>echo $”Usage: $0 {start|stop|restart}”</li>
<li>exit 1</li>
<li>esac  </li>
<li><p>exit 0</p>
</li>
<li><p>——————-[E]url_hash转发方式nginx启动、关闭脚本[E]——————–  </p>
</li>
</ol>
<p>——————-[S]url_hash转发方式nginx启动、关闭脚本[S]——————–  #!/bin/sh  CWD=`pwd`     case $1 in         start)                         /usr/local/webserver/nginx/sbin/nginx    ;;         stop)                 kill -2 `ps -ef|grep “/usr/local/webserver/nginx/sbin/nginx”|grep -v “grep”|awk ‘{print $2}’ `                         ;;         restart)                 cd “$CMD”                 $0 stop                 $0 start         ;;         *)         echo $”Usage: $0 {start|stop|restart}”         exit 1 esac exit 0   ——————-[E]url_hash转发方式nginx启动、关闭脚本[E]——————– </p>
<p>更改该文件权限</p>
<p>Java代码</p>
<ol>
<li><p>chmod u+x nginx.sh  </p>
</li>
<li><p>启动 nginx ./nginx.sh start  </p>
</li>
<li>重启 nginx ./nginx.sh restart  </li>
<li>关闭 nginx ./nginx.sh stop</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/26/reason-442-failed-to-enable-virtual-adapter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/26/reason-442-failed-to-enable-virtual-adapter/" itemprop="url">VPN连不上，报错：Reason 442: failed to enable virtual adapter.</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-26T14:12:06+08:00">
                2010-11-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>VPN连不上，怎么办？  </p>
<p>点连接后，过一会儿出现一个对话框：<br>Secure VPN connection terminated locally by the client.<br>Reason 442: failed to enable virtual adapter.<br>Connection terminated on: 后面是日期</p>
<p>后来查出为cisco的虚拟网卡上Deterministic Network Enhancer协议没有启用，启用后再试就OK了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/24/proc-sys-fs-file-max-vs-ulimit-n/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/24/proc-sys-fs-file-max-vs-ulimit-n/" itemprop="url">/proc/sys/fs/file-max VS ulimit -n</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-24T13:36:16+08:00">
                2010-11-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>简单的说, max-file表示系统级别的能够打开的文件句柄的数量, 而ulimit -n控制进程级别能够打开的文件句柄的数量.  </p>
<p>man 5 proc, 找到file-max的解释：<br>file-max中指定了系统范围内所有进程可打开的文件句柄的数量限制(系统级别, kernel-level). （The value in file-max denotes the maximum number of file handles that the Linux kernel will allocate）.当收到”Too many open files in system”这样的错误消息时, 就应该曾加这个值了.  </p>
<p># cat /proc/sys/fs/file-max<br>4096<br># echo 100000 &gt; /proc/sys/fs/file-max  </p>
<p>或者<br># echo “”fs.file-max=65535” &gt;&gt; /etc/sysctl.conf<br># sysctl -p  </p>
<p>The kernel constant NR_OPEN imposes an upper limit on the value that may be placed in file-max. （这句啥子意思？ 没太明白）  </p>
<p>对于2.2的内核, 还需要考虑inode-max, 一般inode-max设置为file-max的4倍. 对于2.4及以后的内核, 没有inode-max这个文件了.  </p>
<p>file-nr 可以查看系统中当前打开的文件句柄的数量. 他里面包括3个数字： 第一个表示已经分配了的文件描述符数量, 第二个表示空闲的文件句柄数量, 第三个表示能够打开文件句柄的最大值（跟file-max一致）. 内核会动态的分配文件句柄, 但是不会再次释放他们（这个可能不适应最新的内核了, 在我的file-nr中看到第二列一直为0, 第一列有增有减）  </p>
<p>man bash, 找到说明ulimit的那一节：<br>提供对shell及其启动的进程的可用资源（包括文件句柄, 进程数量, core文件大小等）的控制. 这是进程级别的, 也就是说系统中某个session及其启动的每个进程能打开多少个文件描述符, 能fork出多少个子进程等…  </p>
<p>当达到上限时, 会报错”Too many open files”或者遇上Socket/File: Can’t open so many files等  </p>
<p>另外需要注意的是, 每种资源都有相关的软硬限制, 软限制是内核强加给相应资源的限制值,硬限制是软限制的最大值. 非授权调用进程只可以将其软限制指定为0~硬限制范围中的某个值,同时能不可逆转地降低其硬限制.授权进程可以任意改变其软硬限 制.RLIM_INFINITY的值表示不对资源限制.  </p>
<p>分别使用-H和-S选项来指定需要对资源是做硬限制/软限制的设置. 如果都不指定, 硬限制和软限制同时设置.  </p>
<p>打印资源的限制值, 如果不明确指定-H, 打印的是-S  </p>
<p>要改apache的ulimit, 可以在 /usr/sbin/apachectl 这个脚本中修改 ULIMIT_MAX_FILES 这个值  </p>
<p>可打开文件句柄数设置的太大, 有那些危害：<br>If the file descriptors are tcp sockets, etc, then you risk using up a large amount of memory for the socket buffers and other kernel objects; this memory is not going to be swappable.  </p>
<p>另外要记得的是socket connection也是文件.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/23/tokyo-tyrant-ttserver-backup-recovery-and-increase-from-library/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/23/tokyo-tyrant-ttserver-backup-recovery-and-increase-from-library/" itemprop="url">Tokyo Tyrant（TTServer）-备份恢复和增加从库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-23T14:53:16+08:00">
                2010-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前面我们说了TTServer的使用，以及如何在开始的时候配置主从。在使用中它非常高效和可靠，那么如果我们的服务运行一段时间后，需要增加一个从库（ttserver）来分担压力或者用于负载均衡和HA，因为是线上系统，那么就不应该停机，那么我们应该怎么对数据进行备份和拷贝，然后启动一个slave从库呢？   </p>
<p><strong>1.如何备份和恢复</strong>  </p>
<pre><code>  登录到ttserver服务器，执行如下命令  

  \]# tcrmgr copy -port 11211 localhost  /data/backup.tch  

  localhost :ttserver主机名  

  /data/backup.tch  备份文件保存的路径，请注意，这里指ttserver所在机器的路径。  

同样，也可以备份远程机器，  

  \]# tcrmgr copy -port 11211 remotehost  /data/backup.tch  

备份文件将保存在remotehost的/data/backup.tch  

  接下来恢复数据就比较简单，直接替换掉原有ttserver的数据文件，启动就可以了。  

  这种方式适用于定期的数据备份，在出现灾难故障时可以恢复到某一个时间的数据。不适合用来增加从库时需要的数据库文件。  
</code></pre><p><strong>2.如何不停机增加从库</strong>  </p>
<pre><code>从库需要进行同步，那么就需要有个文件的时间版本，防止数据冲突。  

首先我们建立一个一个如下的脚本文件，存为&quot;backup.sh&quot;,并赋予执行权限(chmod 755 backup.sh)。比如存在：  
</code></pre><p>/data/backup/路径下。  </p>
<p>#! /bin/sh<br>srcpath=”$1”<br>destpath=”$1.$2”<br>rm -f “$destpath”<br>cp -f “$srcpath” “$destpath”    接下执行如下命令，执行的时间会根据你的磁盘性能和数据大小而定。<br>tcrmgr copy -port 11211 masterhost ‘@/data/backup/backup.sh’   </p>
<p>materthost:主库主机名，请注意：backup.sh存放的路径是在materthost机器上。  </p>
<p>‘@/data/backup/backup.sh’  ：如果tcrmgr copy命令中，参数以@开始，那么后面的字符串作为命令行执行。  </p>
<p>执行完成后，我们进入ttserver的数据目录，执行ls -lh会发现类似下面的文件名，  </p>
<p>-rw-r–r–  1 root root 9.2G Aug 25 14:31 casket.tch.1251181588942889  </p>
<p>请确认产生casket.tch.xxxxx类似的文件名，xxxxx代表时间戳。  </p>
<p>接下来在从库salve上以我们备份的文件来运行ttserver，把时间错写入到一个时间戳文件ttserver.rts。  </p>
<p>]$ ls<br>]$ cp casket.tch.xxxxx casket.tch<br>]$ echo xxxxx &gt;ttserver.rts<br>]$ mkdir ulog<br>]$ ttserver -mhost masterhost -mport mport -port 11211 -ulog ulog -sid 2 -rts ttserver.rts  casket.tch  </p>
<p>运行后，ttserver将会以此时间戳进行同步。  </p>
<p>masterhost ：主库主机名  </p>
<p>mport :  主库端口号  </p>
<p>到此我们就完成了一个salve从库ttserver的增加。  </p>
<p><strong>3.小结</strong>  </p>
<p>  推荐备份也使用2中用到的方式，上面带上了时间戳，可以精确的知道数据的版本时间。  </p>
<p>  另外请注意：在使用此方法进行备份的时候，ttserver会在备份过程中一直保持同步阻塞和不修改数据。所以可以保证备份出来的版本跟时间戳的一致性。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/23/ttserver-several-deployment-methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/23/ttserver-several-deployment-methods/" itemprop="url">ttserver几种部署方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-23T14:18:17+08:00">
                2010-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>可以把ttserver理解成一种key-value形式的数据库，在运营中就像管理数据库一样去管理ttserver，使得性能和数据安全都能得到较好的保障。<br>部署ttserver的方式，可以根据访问量和数据规模循序渐进地这样部署：</p>
<p>1、单机：数据量不大，访问量不大<br>ttserver -host 192.168.0.100 -port 20001 -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_01 -log /home/ahfu/temp/test_data/log/test_data_01.log -pid /home/ahfu/temp/test_data/log/test_data_01.pid -sid 1 /home/ahfu/temp/test_data/test_data_01.tch#bnum=10000000#rcnum=100000#xmsiz=256m<br>如果希望提高查询的性能，可以把hash的桶设置得再大些，然后缓存的记录多一些。<br>同时，设置-uas参数异步写入日志，可提高写入的性能。不过这样可能导致日志丢失，降低了数据安全性。</p>
<p>2、一主一备：数据量不大，访问量不大，且对数据安全性有要求<br>主服务器：(与上面一致)<br>ttserver -host 192.168.0.100 -port 20001 -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_01 -log /home/ahfu/temp/test_data/log/test_data_01.log -pid /home/ahfu/temp/test_data/log/test_data_01.pid -sid 1 /home/ahfu/temp/test_data/test_data_01.tch#bnum=10000000#rcnum=100000#xmsiz=256m<br>备份服务器：在另一个机器上启动，不需要缓存<br>ttserver -host 192.168.0.101 -port 20002 -mhost 192.168.0.100 -mport 20001 -rcc -rts /home/ahfu/temp/test_data/test_data_01.rts -thnum 5 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_02 -log /home/ahfu/temp/test_data/log/test_data_02.log -pid /home/ahfu/temp/test_data/log/test_data_02.pid -sid 2 /home/ahfu/temp/test_data/test_data_02.tch#bnum=10000000#rcnum=0#xmsiz=0m<br>备份服务器可以找性能不高的旧服务器，这种设置也只是为了保障数据安全而做的设置。</p>
<p>3、互为主备：数据量增大，访问量也增大，对数据安全有要求，且希望避免单点故障<br>第一个服务器：<br>ttserver -host 192.168.0.100 -port 20001 -mhost 192.168.0.101 -mport 20002 -rcc -rts /home/ahfu/temp/test_data/test_data_01.rts -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_01 -log /home/ahfu/temp/test_data/log/test_data_01.log -pid /home/ahfu/temp/test_data/log/test_data_01.pid -sid 1 /home/ahfu/temp/test_data/test_data_01.tch#bnum=10000000#rcnum=100000#xmsiz=256m<br>第二个服务器：<br>ttserver -host 192.168.0.101 -port 20002 -mhost 192.168.0.100 -mport 20001 -rcc -rts /home/ahfu/temp/test_data/test_data_02.rts -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_02 -log /home/ahfu/temp/test_data/log/test_data_02.log -pid /home/ahfu/temp/test_data/log/test_data_02.pid -sid 2 /home/ahfu/temp/test_data/test_data_02.tch#bnum=10000000#rcnum=100000#xmsiz=256m<br>应用程序可以访问任意一个服务器进行读写，且应用程序发现某服务器不能访问后，可立即转到另一台服务器。</p>
<p>4、读写分离：写量猛增，读量猛增<br>TokyoCabinet支持六种数据引擎，其中on-memory hash database和on-memory b+ database两种是将数据存放在内存中的，不对数据做持久化。<br>因此，可以使用on-memory hash database引擎的ttserver作为写服务器，然后采用复制的方式将on-memory hash database上的数据复制到hash database的多个ttserver上去，然后将多个hash database ttserver作为读服务器。这实际上是通过降低一致性来提高性能。<br>on-memory hash database的配置： 缓存的记录数和内存都配置得很小<br>ttserver -host 192.168.0.99 -port 20000 -thnum 128 -dmn -ulim 1024m -ulog /data/home/game/temp/test_data/test_ulog_01 -log /data/home/game/temp/test_data/log/test_data_01.log -pid /data/home/game/temp/test_data/log/test_data_01.pid -sid 0 “*#bnum=10000000#capnum=100#capsiz=10m”<br>hash database ttserver 1 的配置： 从on-memory hash database复制数据<br>ttserver -host 192.168.0.100 -port 20001 -mhost 192.168.0.99 -mport 20000 -rcc -rts /home/ahfu/temp/test_data/test_data_01.rts -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_01 -log /home/ahfu/temp/test_data/log/test_data_01.log -pid /home/ahfu/temp/test_data/log/test_data_01.pid -sid 1 “/home/ahfu/temp/test_data/log/test_data_01.tch#bnum=10000000#rcnum=100000#xmsiz=256m”<br>hash database ttserver 2 的配置： 从on-memory hash database复制数据<br>ttserver -host 192.168.0.101 -port 20002 -mhost 192.168.0.99 -mport 20000 -rcc -rts /home/ahfu/temp/test_data/test_data_02.rts -thnum 128 -dmn -ulim 1024m -ulog /home/ahfu/temp/test_data/test_ulog_02 -log /home/ahfu/temp/test_data/log/test_data_02.log -pid /home/ahfu/temp/test_data/log/test_data_02.pid -sid 2 “/home/ahfu/temp/test_data/log/test_data_02.tch#bnum=10000000#rcnum=100000#xmsiz=256m”<br>配置为读写分离后，客户端写入的时候连接on-memory hash database，读取的时候连接其他的ttserver。</p>
<p>5、客户端实现分布，分库：海量数据<br>数据量再大，靠几台服务器已经无法支撑的时候，分库仍然是无奈的选择。将数据按照业务划分，或者按照某一数值划分，存在在多个ttserver群集中去。<br>客户端程序在写入或者读取的时候，自动根据业务规则去访问对应的群集即可。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/22/how-do-i-view-the-status-of-a-loaded-module-what-are-the-parameters-of-loading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/22/how-do-i-view-the-status-of-a-loaded-module-what-are-the-parameters-of-loading/" itemprop="url">怎样查看已加载模块的状态？，加载时的参数？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-22T13:22:11+08:00">
                2010-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1: 查看已加载模块使用lsmod命令可以进行查看.<br>2: modinfo<br>功能说明：显示kernel模块的信息。<br>语法：<br>modinfo [-0]  [-F field]  [modulename|filename …]<br>modinfo -V<br>modinfo -h<br>补充说明：modinfo会显示kernel模块的对象文件，以显示该模块的相关信息。<br>参数：<br>-F field 只打印指定的区域的信息。<br>-a 显示模块作者名称。<br>-d 显示模块的说明。<br>-l 显示模块的授权。<br>-n 显示模块的详细路径及名称。<br>-p 显示模块所支持的参数。<br>-h 显示帮助信息。<br>-V或–version 　显示版本信息。<br>详细参考帮助信息。<br>如：<br>[root@192_168_168_53 ~]# modinfo bnx2<br>filename:       /lib/modules/2.6.18-164.el5PAE/kernel/drivers/net/bnx2.ko<br>version:        1.9.3<br>license:        GPL<br>description:    Broadcom NetXtreme II BCM5706/5708/5709/5716 Driver<br>author:         Michael Chan <a href="mailto:&#x6d;&#99;&#104;&#97;&#x6e;&#x40;&#x62;&#x72;&#x6f;&#97;&#x64;&#99;&#x6f;&#x6d;&#x2e;&#x63;&#111;&#109;" target="_blank" rel="noopener">&#x6d;&#99;&#104;&#97;&#x6e;&#x40;&#x62;&#x72;&#x6f;&#97;&#x64;&#99;&#x6f;&#x6d;&#x2e;&#x63;&#111;&#109;</a><br>srcversion:     D151EAED8C1037CA480DE9A<br>alias:          pci:v000014E4d0000163Csv*sd*bc*sc*i<em><br>alias:          pci:v000014E4d0000163Bsv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d0000163Asv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d00001639sv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d000016ACsv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d000016AAsv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d000016AAsv0000103Csd00003102bc\</em>sc*i<em><br>alias:          pci:v000014E4d0000164Csv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d0000164Asv\</em>sd*bc*sc*i<em><br>alias:          pci:v000014E4d0000164Asv0000103Csd00003106bc\</em>sc*i<em><br>alias:          pci:v000014E4d0000164Asv0000103Csd00003101bc\</em>sc*i*<br>depends:<br>vermagic:       2.6.18-164.el5PAE SMP mod_unload 686 REGPARM 4KSTACKS gcc-4.1<br>parm:           disable_msi:Disable Message Signaled Interrupt (MSI) (int)<br>parm:           enable_entropy:Allow bnx2 to populate the /dev/random entropy pool (int)<br>module_sig:     883f3504a8b963d18758d6145e11236c109d1659f6ec113f5c9750685b8424a0cf48c99d48709f4821894b64ca2fb928f595f8b9a45aab5788b  </p>
<p>[root@192_168_168_53 ~]# modinfo -p bnx2<br>enable_entropy:Allow bnx2 to populate the /dev/random entropy pool<br>disable_msi:Disable Message Signaled Interrupt (MSI)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/22/ttyrpld-tty-logging-daemon/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/22/ttyrpld-tty-logging-daemon/" itemprop="url">ttyrpld – tty logging daemon</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-22T13:02:35+08:00">
                2010-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p><em>ttyrpld</em> is a multi-os kernel-level tty logger (key- and screenlogger for ttys) with (a)synchronous replay supprt. It supports most tty types, including _vc_, bsd and unix98-style _pty_s (xterm/ssh), <em>serial</em>, <em>isdn</em>, etc. Being implemented within the kernel makes it unavoidable for the default user. It runs with no overhead if the logging daemon is not active.</p>
<h1 id="Technical-aspects"><a href="#Technical-aspects" class="headerlink" title="Technical aspects"></a>Technical aspects</h1><p><em>… which cause it to differ from existing solutions:</em></p>
<p>Most other solutions deploy the logging completely in userspace and make it dependent on the user to activate the logging. Definitely, an intruder does not start e.g. <code>/usr/bin/script</code> voluntarily. I have only seen few other kernel-based loggers. One of them is outdated, others query the x86 keyboard driver using interrupt hijacking and fixed translation. This is very unportable, because it only catches raw AT keyboard scancodes, but not USB or even other keyboards (unless they are in compatibility mode), and it does not work at all for network traffic.</p>
<p>Only the FreeBSD snooper <em>watch</em>, which operates on the <code>/dev/snp*</code> devices, can be taken for a comparison. However, it can only do the interactive live feed mode, no logging is possible for later replay. Packet time stamps are also missing.</p>
<h1 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h1><p>This kit (<em>ttyrpld</em>) consists of four components:</p>
<p><em>kpatch</em>: The kernel patch adds a few lines to provide the <em>rpldev</em> extension hooks, which (any) module can then get onto.</p>
<p><em>rpldev</em>: The kernel module is responsible for grabbing the data off the tty line and providing a character device for the user-space logging daemon. Data grabbed of the tty is directly passed to the overlying daemons, so with the correct terminal settings you can get a 1:1 replay.</p>
<p>For systems where module loading is not possible or not widely supported (OpenBSD for example), <em>rpldev</em> is integrated into the kpatch.</p>
<p><em>rpld</em>: Having received the captured data, the logging daemon can store them in any format and/or facility, with or without compression, just as it likes, for this happens in user-space and thus you have all the fluffy libraries available. (That would not be the case from kernel space.)</p>
<p><em>ttyreplay</em>: real-time log analyzer. Think of it as a simple video player.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/22/mandatory-umount/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/22/mandatory-umount/" itemprop="url">强制umount</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-22T11:32:02+08:00">
                2010-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天发现umount有一个命令，umount -l可以强制卸载挂载，但要小心使用</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2010/11/22/what-if-the-local-user-and-group-can-t-find-this-item/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2010/11/22/what-if-the-local-user-and-group-can-t-find-this-item/" itemprop="url">win7本地用户和组找不到这一项怎么办？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2010-11-22T11:27:23+08:00">
                2010-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>说明你的win7 是 家庭版的。<br>直接在开始菜单运行（按win徽标键和字母R键）框里面输入lusrmgr.msc ，如果不能弹出本地用户和组的界面，说明就是家庭版，或者lusrmgr.msc被精简掉了。<br>                                                       超级管理员=ADMINISTRATIOR  </p>
<p>1.默认状态下有Administrator身份却不能显示出来。需要打开注册表[开始-〉运行-〉regedit，并且你要有管理员权限]在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Winlogon\<br>下新建注册表项“SpecialAccounts”，再在其下新建子项“UserList”，然后新建一个名为“Administrator”的DWORD(32位)值，将其数值改成“1”（该步骤是要vista认识Administrator身份）；  </p>
<p>  2.开始，运行cmd，在DOS窗口下输入net user administrator    /active:yes（注意：/前有两个空格！否则运行会提示错误命令；该步骤是激活administrator用户）； （要开机按F8后进安全模式，在管理员权限下才能运行成功）  </p>
<p>  3.重启计算机或切换用户，这是应该能看到多出来了administrator用户，以administrator身份登陆即可！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">277</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">163</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
