<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="haitian的博客">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="haitian的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="haitian的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/"/>





  <title>haitian的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">haitian的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">为了更好的生活而奋斗!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/07/22/under-linux-different-ip-addresses-are-in-the-same-network-segment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/07/22/under-linux-different-ip-addresses-are-in-the-same-network-segment/" itemprop="url">Linux下多网卡不同IP在同一网段的情况</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-07-22T14:17:21+08:00">
                2011-07-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在看Intel 1000 PT网卡的驱动时，有如下信息：</p>
<p>Multiple Interfaces on Same Ethernet Broadcast Network</p>
<p>echo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_filter</p>
<p>google了一下，有人已经试验了这个，摘录如下：</p>
<p><a href="http://blog.sina.com.cn/s/blog_544465b0010000kf.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_544465b0010000kf.html</a></p>
<p><strong>多网卡在同一网段内的问题</strong>(2005-11-23 23:38:42)</p>
<p>分类：<a href="http://blog.sina.com.cn/s/articlelist_1413768624_5_1.html" target="_blank" rel="noopener">网络安全</a></p>
<p>关键字：Strict Interface ARP, Multi-link, Multipath, Multiple network cards on same subnet problem  </p>
<p>公司那个提供音乐下载的域名流量直逼 1Gbps，但是系统的连接却不高，服务器用的是DELL2850的，板载两个Gbe的网口，还插了两块Intel的Gbe网卡，因此打算通过多网卡的负 载均衡扩充一下系统的网络带宽。但是不想用多网卡的邦定，感觉那样不太灵活，因此决定采用Advanced Routing来解决这个问题。</p>
<p>查了一下 man ip，然后开始做了：</p>
<p>1) 给四个网口配置了四个地址</p>
<p>2) 在BIGIP上面把四个地址都加入到负载均衡</p>
<p>3) 用ip命令实现多网卡负载均衡</p>
<p>ip route replace default equalize scope global nexthop via 172.24.x.11 dev eth0 weight 1 nexthop via 172.24.x.11 dev eth1 weight 1 nexthop via 172.24.x.1 dev eth2 weight 1 nexthop via 172.24.x.11 dev eth3 weight 1</p>
<p>立即看到所有的流量被均衡到4个网口</p>
<p>但是出现了新的问题，大量的IP地址冲突信息出现在BIGIP的日志：</p>
<p>Nov 23 19:18:56 tc04 kernel: arp info overwritten for 172.24.x.30 by 00:14:22:1b:94:dc<br>Nov 23 20:30:24 tc04 kernel: arp info overwritten for 172.24.x.30 by 00:04:23:c0:5c:88<br>Nov 23 20:30:28 tc04 kernel: arp info overwritten for 172.24.x.30 by 00:14:22:1b:94:dc<br>Nov 23 21:03:14 tc04 kernel: arp info overwritten for 172.24.x.30 by 00:14:22:1b:94:dd</p>
<p>发现出现的几个产生IP冲突的MAC地址都是这台机器上面其他的网口的MAC，这就奇怪了。</p>
<p>通过tcpdump抓包，分析ARP信息发现是因为Linux响应ARP请求的时候，使用的IP地址并未被严格的限定，因此导致了这个问题。</p>
<p>很快 Google 到这篇文章：<a href="http://oss.sgi.com/projects/netdev/archive/2001-09/msg00098.html" target="_blank" rel="noopener">[PATCH] strict interface arp patch for Linux 2.4.2</a></p>
<p>然后就跑去 <a href="http://www.linuxvirtualserver.org/" target="_blank" rel="noopener">http://www.linuxvirtualserver.org/</a> 找到 <a href="http://www.linuxvirutalserver.org/docs/arp.html" target="_blank" rel="noopener">http://www.linuxvirutalserver.org/docs/arp.html</a></p>
<p>发现没有什么可用的信息，然后就硬着头皮进入到 /proc/sys/net/ipv4/conf/all 目录看看有啥线索是解决2.6的</p>
<p>看到三个文件 arp_announce, arp_ignore, arp_filter</p>
<p>立即去 /usr/src/linux/Documentation/networking/ip-sysctl.txt 找到相关的说明：</p>
<p>arp_filter - BOOLEAN<br>        1 - Allows you to have multiple network interfaces on the same<br>        subnet, and have the ARPs for each interface be answered<br>        based on whether or not the kernel would route a packet from<br>        the ARP’d IP out that interface (therefore you must use source<br>        based routing for this to work). In other words it allows control<br>        of which cards (usually 1) will respond to an arp request.</p>
<pre><code>0 - (default) The kernel can respond to arp requests with addresses  
from other interfaces. This may seem wrong but it usually makes  
sense, because it increases the chance of successful communication.  
IP addresses are owned by the complete host on Linux, not by  
particular interfaces. Only for more complex setups like load-  
balancing, does this behaviour cause problems.

arp_filter for the interface will be enabled if at least one of  
conf/{all,interface}/arp_filter is set to TRUE,  
it will be di sabled otherwise
</code></pre><p>arp_announce - INTEGER<br>        Define different restriction levels for announcing the local<br>        source IP address from IP packets in ARP requests sent on<br>        interface:<br>        0 - (default) Use any local address, configured on any interface<br>        1 - Try to avoid local addresses that are not in the target’s<br>        subnet for this interface. This mode is useful when target<br>        hosts reachable via this interface require the source IP<br>        address in ARP requests to be part of their logical network<br>        configured on the receiving interface. When we generate the<br>        request we will check all our subnets that include the<br>        target IP and will preserve the source address if it is from<br>        such subnet. If there is no such subnet we select source<br>        address according to the rules for level 2.<br>        2 - Always use the best local address for this target.<br>        In this mode we ignore the source address in the IP packet<br>        and try to select local address that we prefer for talks with<br>        the target host. Such local address is selected by looking<br>        for primary IP addresses on all our subnets on the outgoing<br>        interface that include the target IP address. If no suitable<br>        local address is found we select the first local address<br>        we have on the outgoing interface or on all other interfaces,<br>        with the hope we will receive reply for our request and<br>        even sometimes no matter the source IP address we announce.</p>
<pre><code>The max value from conf/{all,interface}/arp_announce is used.

Increasing the restriction level gives more chance for  
receiving answer from the resolved target while decreasing  
the level announces more valid sender&apos;s information.
</code></pre><p>arp_ignore - INTEGER<br>        Define different modes for sending replies in response to<br>        received ARP requests that resolve local target IP addresses:<br>        0 - (default): reply for any local target IP address, configured<br>        on any interface<br>        1 - reply only if the target IP address is local address<br>        configured on the incoming interface<br>        2 - reply only if the target IP address is local address<br>        configured on the incoming interface and both with the<br>        sender’s IP address are part from same subnet on this interface<br>        3 - do not reply for local addresses configured with scope host,<br>        only resolutions for global and link addresses are replied<br>        4-7 - reserved<br>        8 - do not reply for all local addresses</p>
<pre><code>The max value from conf/{all,interface}/arp_ignore is used  
when ARP request is received on the {interface}
</code></pre><p>嘿嘿，通过：</p>
<p>echo 2 &gt; /proc/sys/net/ipv4/conf/all/arp_announce</p>
<p>echo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_ignore</p>
<p>or</p>
<p>echo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_filter</p>
<p>立即搞定！</p>
<p>继续 Google 了一些信息，发现前面两个内核控制好像是在 2.6.5 实现的 :-)</p>
<p>推荐用前面的两个，arp_filter应该也能解决，感觉前面的两个是对arp_filter的更细节控制的实现。</p>
<p>然后还发现在inter pro/1000的网卡驱动的安装指南里面也有一节：</p>
<p>Multiple Interfaces on Same Ethernet Broadcast Network<br>------------------------------------------------------</p>
<p>Due to the default ARP behavior on Linux, it is not possible to have<br>one system on two IP networks in the same Ethernet broadcast domain<br>(non-partitioned switch) behave as expected. All Ethernet interfaces<br>will respond to IP traffic for any IP address assigned to the system.<br>This results in unbalanced receive traffic.</p>
<p>If you have multiple interfaces in a server, either turn on ARP<br>filtering by entering:</p>
<p>echo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_filter<br>(this only works if your kernel’s version is higher than 2.4.5),</p>
<p>or,</p>
<p>install the interfaces in separate broadcast domains (either<br>in different switches or in a switch partitioned to VLANs).</p>
<p>参考信息：</p>
<p><a href="http://linux-ip.net/html/ether-arp.html" target="_blank" rel="noopener">http://linux-ip.net/html/ether-arp.html</a></p>
<p><a href="http://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.arp_problem.html" target="_blank" rel="noopener">http://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.arp_problem.html</a></p>
<p><a href="http://www.ssi.bg/%7Eja/#arp_announce" target="_blank" rel="noopener">http://www.ssi.bg/~ja/#arp_announce</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/07/14/spacewalk-installation-instructions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/07/14/spacewalk-installation-instructions/" itemprop="url">Spacewalk Installation Instructions</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-07-14T09:34:28+08:00">
                2011-07-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一、准备工作  </p>
<hr>
<h2 id="1-Setting-up-Spacewalk-repo"><a href="#1-Setting-up-Spacewalk-repo" class="headerlink" title="1.Setting up Spacewalk repo"></a>1.Setting up Spacewalk repo</h2><p>rpm -Uvh <a href="http://spacewalk.redhat.com/yum/1.4/RHEL/5/x86_64/spacewalk-repo-1.4-1.el5.noarch.rpm" target="_blank" rel="noopener">http://spacewalk.redhat.com/yum/1.4/RHEL/5/x86_64/spacewalk-repo-1.4-1.el5.noarch.rpm</a></p>
<h2 id="2-Additional-repos-amp-packages"><a href="#2-Additional-repos-amp-packages" class="headerlink" title="2.Additional repos &amp; packages"></a>2.Additional repos &amp; packages</h2><p>rpm -Uvh <a href="http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm" target="_blank" rel="noopener">http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm</a>  </p>
<p>3.Follow the instructions to use <strong>EPEL5</strong> with the additions: </p>
<ul>
<li><p>Necessary packages rhn-client-tools and rhnlib were removed from CentOS, they can be found in spacewalk-client repo. Setup it by installing spacewalk-client-repo package.</p>
<p>rpm -ihv <a href="http://spacewalk.redhat.com/yum/1.4-client/RHEL/5/x86_64/spacewalk-client-repo-1.4-1.el5.noarch.rpm" target="_blank" rel="noopener">http://spacewalk.redhat.com/yum/1.4-client/RHEL/5/x86_64/spacewalk-client-repo-1.4-1.el5.noarch.rpm</a> </p>
</li>
<li><p>Import Redhat’s RPM GPG key:</p>
<p># wget -O /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release <a href="http://www.redhat.com/security/37017186.txt" target="_blank" rel="noopener">http://www.redhat.com/security/37017186.txt</a> # rpm –import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</p>
</li>
</ul>
<p>二、数据库安装Oracle Pre-Requisites  </p>
<h2 id="Download"><a href="#Download" class="headerlink" title="Download "></a>Download </h2><h2 id="server-oracle-xe-univ-10-2-0-1-1-0-i386-rpm"><a href="#server-oracle-xe-univ-10-2-0-1-1-0-i386-rpm" class="headerlink" title="server: oracle-xe-univ-10.2.0.1-1.0.i386.rpm"></a>server: oracle-xe-univ-10.2.0.1-1.0.i386.rpm</h2><p>client:  </p>
<ul>
<li>oracle-instantclient11.2-basic-11.2.0.2.0.ARCH.rpm</li>
<li>oracle-instantclient11.2-sqlplus-11.2.0.2.0.ARCH.rpm</li>
</ul>
<p># /usr/sbin/groupadd -r dba # /usr/sbin/useradd -r -M -g dba -d /usr/lib/oracle/xe -s /bin/bash oracle  </p>
<p>and check swap size &gt; 1G<br>yum -y install bc libc.so.6 libaio.so.1<br> yum -y localinstall –nogpgcheck oracle-xe-univ-10.2.0.1-1.0.i386.rpm<br>yum -y localinstall –nogpgcheck oracle-instantclient11.2-basic<em>.rpm oracle-instantclient11.2-sqlplus</em>.rpm<br>yum -y install oracle-lib-compat<br>yum -y install oracle-xe-selinux oracle-instantclient-selinux oracle-instantclient-sqlplus-selinux<br>配置 /etc/init.d/oracle-xe configure<br>HTTP port for Oracle Application Express: 9055只修改端口，其他的默认<br>测试：sqlplus ‘sys/<password>@//localhost/XE as sysdba’  </password></p>
<h2 id="Create-the-spacewalk-database-user"><a href="#Create-the-spacewalk-database-user" class="headerlink" title="Create the spacewalk database user"></a>Create the spacewalk database user</h2><p>SQL&gt; create user spacewalk identified by spacewalk default tablespace users; SQL&gt; grant dba to spacewalk; SQL&gt; quit<br>测试sqlplus spacewalk/spacewalk@//localhost/XE  </p>
<h2 id="Additional-Oracle-configuration"><a href="#Additional-Oracle-configuration" class="headerlink" title="Additional Oracle configuration"></a>Additional Oracle configuration</h2><p># sqlplus spacewalk/spacewalk@//localhost/XE SQL&gt; alter system set processes = 400 scope=spfile;  SQL&gt; alter system set “_optimizer_filter_pred_pullup”=false scope=spfile;  SQL&gt; alter system set “_optimizer_cost_based_transformation”=off scope=spfile;  SQL&gt; quit   # /sbin/service oracle-xe restart </p>
<p>三、安装<br>yum remove cobbler-web<br>yum install spacewalk-oracle   </p>
<h2 id="Configuring-the-firewall"><a href="#Configuring-the-firewall" class="headerlink" title="Configuring the firewall"></a>Configuring the firewall</h2><p>iptables -D RH-Firewall-1-INPUT -j REJECT –reject-with icmp-host-prohibited iptables -A RH-Firewall-1-INPUT -p tcp -m tcp –dport 443 -j ACCEPT iptables -A RH-Firewall-1-INPUT -p tcp -m tcp –dport 80 -j ACCEPT iptables -A RH-Firewall-1-INPUT -j REJECT –reject-with icmp-host-prohibited service iptables save service iptables restart  </p>
<h2 id="Configuring-Spacewalk"><a href="#Configuring-Spacewalk" class="headerlink" title="Configuring Spacewalk"></a>Configuring Spacewalk</h2><p>spacewalk-setup –disconnected<br>Database service name (SID)? XE<br>其他的默认，创建CA证书和cobbler  </p>
<p>可以使用<a href="http://hostname.localdomain.com去访问了。" target="_blank" rel="noopener">http://hostname.localdomain.com去访问了。</a><br> 要查看日志在/var/log/tomcat5/catalina.out 如果使用tomcat6，要<br>chmod g+w /var/log/tomcat6</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/07/06/vsftpd-time-zone-problem-solving/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/07/06/vsftpd-time-zone-problem-solving/" itemprop="url">vsftpd时区问题的解决</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-07-06T09:33:55+08:00">
                2011-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天上面让开个ftp的服务<br>就找一台linux的服务器安装了vsftp<br>后来看到外边的客户来下载资料的时候发现日志里面的时间和本地相差8小时<br>立即感觉是vsftp的时区问题<br>找vsftpd的配置帮助文件<br>发现下面的一个参数<br>设置为yes后日志里面的时间就正确了<br>在次小记一下<br>use_localtime<br>If enabled, vsftpd will display directory listings with the time in your local time zone. The default is to display GMT. The times returned by the MDTM FTP command are also affected by this option.<br>Default: NO</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/06/30/the-use-of-rpm-command-parameters-in-the-linux-operating-system-is-detailed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/06/30/the-use-of-rpm-command-parameters-in-the-linux-operating-system-is-detailed/" itemprop="url">Linux操作系统中RPM命令参数的使用详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-06-30T12:04:18+08:00">
                2011-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在<strong>Linux</strong>操作系统中，有一个系统<strong>软件</strong>包，它的功能类似于Windows里面的“添加/删除程序”，但是功能又比“添加/删除程序”强很多，它就是Red Hat Package Manager(简称<strong>RPM</strong>)。此工具包最先是由Red Hat公司推出的，后来被其他Linux开发商所借用。由于它为Linux使用者省去了很多时间，所以被广泛<strong>应用</strong>于在Linux下安装、删除软件。下面就给大家介绍一下它的具体<strong>使用</strong>方法。</p>
<p>[root@ford /root] # rpm -qa | more</p>
<p>◆1.我们得到一个新软件，在安装之前，一般都要先查看一下这个软件包里有什么内容，假设这个文件是：Linux-1.4-6.i368.rpm，我们可以用这条<strong>命令</strong>查看：</p>
<p>rpm -qpi Linux-1.4-6.i368.rpm</p>
<p>系统将会列出这个软件包的详细资料，包括含有多少个文件、各文件名称、文件大小、创建时间、编译日期等信息。</p>
<p>◆2.上面列出的所有文件在安装时不一定全部安装，就像Windows下程序的安装方式分为典型、完全、自定义一样，Linux也会让你选择安装方式，此时我们可以用下面这条命令查看软件包将会在系统里安装哪些部分，以方便我们的选择：</p>
<p>rpm -qpl Linux-1.4-6.i368.rpm</p>
<p>◆3.选择安装方式后，开始安装。我们可以用rpm -ivh Linux-1.4-6.i368.rpm命令安装此软件。在安装过程中，若系统提示此软件已安装过或因其他原因无法继续安装，但若我们确实想执行安装命令，可以在 -ivh后加一<strong>参数</strong>“-replacepkgs”：</p>
<p>rpm -ivh -replacepkgs Linux-1.4-6.i368.rpm</p>
<p>◆4.有时我们卸载某个安装过的软件，只需执行</p>
<p>rpm -e ＜文件名＞  命令即可。</p>
<p>◆5.对低版本软件进行升级是提高其功能的好办法，这样可以省去我们卸载后再安装新软件的麻烦，要升级某个软件，只须执行如下命令：rpm -uvh ＜文件名＞，注意：此时的文件名必须是要升级软件的升级补丁</p>
<p>◆6. 另外一个安装软件的方法可谓是Linux的独到之处，同时也是RMP强大功能的一个表现：通过FTP站点直接在线安装软件。当找到含有你所需软件的站点并 与此网站连接后，执行下面的命令即可实现在线安装，譬如在线安装Linux-1.4-6.i368.rpm，可以用命令：</p>
<p>rpm -i<a href="ftp://ftp.pht.com/pub/linux/redhat/...-1.4-6.i368.rpm" target="_blank" rel="noopener">ftp://ftp.pht.com/pub/linux/redhat/…-1.4-6.i368.rpm</a></p>
<p>◆7. 在我们使用电脑过程中，难免会有误操作，若我们误删了几个文件而影响了系统的性能时，怎样查找到底少了哪些文件呢?RPM软件包提供了一个查找损坏文件的 功能，执行此命令：rpm -Va 即可，Linux将为你列出所有损坏的文件。你可以通过Linux的安装光盘进行修复。</p>
<p>◆8.Linux系统中文件繁多，在使用过程中，难免会碰到我们不认识的文件，在Windows下我们可以用“开始/查找”菜单快速判断某个文件属于哪个文件夹，在Linux中，下面这条命令行可以帮助我们快速判定某个文件属于哪个软件包：</p>
<p>rpm -qf ＜文件名＞</p>
<p>◆9.当每个软件包安装在Linux系统后，安装文件都会到RPM数据库中“报到”，所以，我们要查询某个已安装软件的属性时，只需到此数据库中查找即可。注意：此时的查询命令不同于1和8介绍的查询，这种方法只适用于已安装过的软件包！命令格式：</p>
<p><strong>一、安装</strong></p>
<p>命令格式：</p>
<p>rpm -i ( or –install) options file1.rpm … fileN.rpm</p>
<p>参数：</p>
<p>file1.rpm … fileN.rpm 将要安装的RPM包的文件名</p>
<p>详细选项：</p>
<p>-h (or –hash) 安装时输出hash记号 (<code></code>#’’)</p>
<p>–test 只对安装进行测试，并不实际安装。</p>
<p>–percent 以百分比的形式输出安装的进度。</p>
<p>–excludedocs 不安装软件包中的文档文件</p>
<p>–includedocs 安装文档</p>
<p>–replacepkgs 强制重新安装已经安装的软件包</p>
<p>–replacefiles 替换属于其它软件包的文件</p>
<p>–force 忽略软件包及文件的冲突</p>
<p>–noscripts 不运行预安装和后安装脚本</p>
<p>–prefix ＜path＞ 将软件包安装到由 ＜path＞ 指定的路径下</p>
<p>–ignorearch 不校验软件包的结构</p>
<p>–ignoreos 不检查软件包运行的<strong>操作系统</strong></p>
<p>–nodeps 不检查依赖性关系</p>
<p>–ftpproxy ＜host＞ 用 ＜host＞ 作为 FTP代理</p>
<p>–ftpport ＜port＞ 指定FTP的端口号为 ＜port＞</p>
<p>通用选项</p>
<p>-v 显示附加信息</p>
<p>-vv 显示调试信息</p>
<p>–root ＜path＞ 让RPM将＜path＞指定的路径做为”根目录”，这样预安装程序和后安</p>
<p>装程序都会安装到这个目录下</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p>–dbpath ＜path＞ 设置RPM 资料库存所在的路径为 ＜path＞</p>
<p><strong>二、删除</strong></p>
<p>命令格式：</p>
<p>rpm -e ( or –erase) options pkg1 … pkgN</p>
<p>参数</p>
<p>pkg1 … pkgN ：要删除的软件包</p>
<p>详细选项</p>
<p>–test 只执行删除的测试</p>
<p>–noscripts 不运行预安装和后安装脚本程序</p>
<p>–nodeps 不检查依赖性</p>
<p>通用选项</p>
<p>-vv 显示调试信息</p>
<p>–root ＜path＞ 让RPM将＜path＞指定的路径做为”根目录”，这样预安装程序和后安装</p>
<p>程序都会安装到这个目录下</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p>–dbpath ＜path＞ 设置RPM 资料库存所在的路径为 ＜path＞</p>
<p><strong>三、升级</strong></p>
<p>命令格式</p>
<p>rpm -U ( or –upgrade) options file1.rpm … fileN.rpm</p>
<p>参数</p>
<p>file1.rpm … fileN.rpm 软件包的名字</p>
<p>详细选项</p>
<p>-h (or –hash) 安装时输出hash记号 (<code></code>#’’)</p>
<p>–oldpackage 允许”升级”到一个老版本</p>
<p>–test 只进行升级测试</p>
<p>–excludedocs 不安装软件包中的文档文件</p>
<p>–includedocs 安装文档</p>
<p>–replacepkgs 强制重新安装已经安装的软件包</p>
<p>–replacefiles 替换属于其它软件包的文件</p>
<p>–force 忽略软件包及文件的冲突</p>
<p>–percent 以百分比的形式输出安装的进度。</p>
<p>–noscripts 不运行预安装和后安装脚本</p>
<p>–prefix ＜path＞ 将软件包安装到由 ＜path＞ 指定的路径下</p>
<p>–ignorearch 不校验软件包的结构</p>
<p>–ignoreos 不检查软件包运行的操作系统</p>
<p>–nodeps 不检查依赖性关系</p>
<p>–ftpproxy ＜host＞ 用 ＜host＞ 作为 FTP代理</p>
<p>–ftpport ＜port＞ 指定FTP的端口号为 ＜port＞</p>
<p>通用选项</p>
<p>-v 显示附加信息</p>
<p>-vv 显示调试信息</p>
<p>–root ＜path＞ 让RPM将＜path＞指定的路径做为”根目录”，这样预安装程序和后安装程序都会安装到这个目录下</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p>–dbpath ＜path＞ 设置RPM 资料库存所在的路径为 ＜path＞</p>
<p><strong>四、查询</strong></p>
<p>命令格式：</p>
<p>rpm -q ( or –query) options</p>
<p>参数：</p>
<p>pkg1 … pkgN ：查询已安装的软件包</p>
<p>详细选项</p>
<p>-p ＜file＞(or <code></code>-‘’) 查询软件包的文件</p>
<p>-f ＜file＞ 查询＜file＞属于哪个软件包</p>
<p>-a 查询所有安装的软件包</p>
<p>–whatprovides ＜x＞ 查询提供了 ＜x＞功能的软件包</p>
<p>-g ＜group＞ 查询属于＜group＞ 组的软件包</p>
<p>–whatrequires ＜x＞ 查询所有需要 ＜x＞ 功能的软件包</p>
<p>信息选项</p>
<p>＜null＞ 显示软件包的全部标识</p>
<p>-i 显示软件包的概要信息</p>
<p>-l 显示软件包中的文件列表</p>
<p>-c 显示配置文件列表</p>
<p>-d 显示文档文件列表</p>
<p>-s 显示软件包中文件列表并显示每个文件的状态</p>
<p>–scripts 显示安装、卸载、校验脚本</p>
<p>–queryformat (or –qf) 以用户指定的方式显示查询信息</p>
<p>–dump 显示每个文件的所有已校验信息</p>
<p>–provides 显示软件包提供的功能</p>
<p>–requires (or -R) 显示软件包所需的功能</p>
<p>通用选项</p>
<p>-v 显示附加信息</p>
<p>-vv 显示调试信息</p>
<p>–root ＜path＞ 让RPM将＜path＞指定的路径做为”根目录”，这样预安装程序和后安装程序都会安装到这个目录下</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p>–dbpath ＜path＞ 设置RPM 资料库存所在的路径为 ＜path＞</p>
<p><strong>五、校验已安装的软件包</strong></p>
<p>命令格式：</p>
<p>rpm -V ( or –verify, or -y) options</p>
<p>参数</p>
<p>pkg1 … pkgN 将要校验的软件包名</p>
<p>软件包选项</p>
<p>-p ＜file＞ Verify against package file ＜file＞</p>
<p>-f ＜file＞ 校验＜file＞所属的软件包</p>
<p>-a Verify 校验所有的软件包</p>
<p>-g ＜group＞ 校验所有属于组 ＜group＞ 的软件包</p>
<p>详细选项</p>
<p>–noscripts 不运行校验脚本</p>
<p>–nodeps 不校验依赖性</p>
<p>–nofiles 不校验文件属性</p>
<p>通用选项</p>
<p>-v 显示附加信息</p>
<p>-vv 显示调试信息</p>
<p>–root ＜path＞ 让RPM将＜path＞指定的路径做为”根目录”，这样预安装程序和后安装程序都会安装到这个目录下</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p>–dbpath ＜path＞ 设置RPM 资料库存所在的路径为 ＜path＞</p>
<p><strong>六、校验软件包中的文件</strong></p>
<p>语法：</p>
<p>rpm -K ( or –checksig) options file1.rpm … fileN.rpm</p>
<p>参数：</p>
<p>file1.rpm … fileN.rpm 软件包的文件名</p>
<p>Checksig–详细选项</p>
<p>–nopgp 不校验PGP签名</p>
<p>通用选项</p>
<p>-v 显示附加信息</p>
<p>-vv 显示调试信息</p>
<p>–rcfile ＜rcfile＞ 设置rpmrc文件为 ＜rcfile＞</p>
<p><strong>七、其它RPM选项</strong></p>
<p>–rebuilddb 重建RPM资料库</p>
<p>–initdb 创建一个新的RPM资料库</p>
<p>–quiet 尽可能的减少输出</p>
<p>–help 显示帮助文件</p>
<p>–version 显示RPM的当前版本</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/06/23/the-df-h-cannot-be-displayed-as-a-one-line-problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/06/23/the-df-h-cannot-be-displayed-as-a-one-line-problem/" itemprop="url">df -h不能显示为一行的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-06-23T10:56:53+08:00">
                2011-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> df -h<br>Filesystem            Size  Used Avail Use% Mounted on<br>/dev/cciss/c0d0p1      20G  1.9G   17G  10% /<br>tmpfs                  12G     0   12G   0% /dev/shm<br>/dev/mapper/skylvm-app<br>                      121G   97G   17G  86% /app<br>/dev/mapper/skylvm-app1<br>                      121G   62G   53G  55% /app1<br>/dev/mapper/skylvm-app2<br>                      121G  197M  114G   1% /app2</p>
<p>当Filesystem 太长时，无法显示为一行，这样给脚本的批量执行带来很大的问题，</p>
<p>经过看帮忙和多方资料尝试，可以这样解决</p>
<p>其实加上-P参数就可以，</p>
<p>df -hP<br>Filesystem            Size  Used Avail Use% Mounted on<br>/dev/cciss/c0d0p1      20G  1.9G   17G  10% /<br>tmpfs                  12G     0   12G   0% /dev/shm<br>/dev/mapper/skylvm-app  121G   97G   17G  86% /app<br>/dev/mapper/skylvm-app1  121G   62G   53G  55% /app1<br>/dev/mapper/skylvm-app2  121G  197M  114G   1% /app2</p>
<p> -P, –portability<br>              use the POSIX output format</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/05/23/broadcom-5709-network-card-abnormal-down-analysis-and-resolution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/05/23/broadcom-5709-network-card-abnormal-down-analysis-and-resolution/" itemprop="url">BROADCOM 5709网卡异常down分析与解决</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-05-23T12:06:17+08:00">
                2011-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现网上dell和hp都相继的出现网卡异常down，导致服务器中断的问题，现综合各方面信息和对网卡异常的跟踪做分析和处理建议。</p>
<p>一、      问题分析和总结  </p>
<p>DELL PE610 是BROADCOM 5709C 的网卡, 对于LINUX 系统下网络I/O大的时候导致的网络不稳定情况,请参考一下REDHAT 公司KB文档 : <a href="https://access.redhat.com/kb/docs/DOC-26837" target="_blank" rel="noopener">https://access.redhat.com/kb/docs/DOC-26837</a> (具体见附件)  [目前需要用户和密码才能访问REDHAT文档资料].</p>
<p>其中注明了此网卡的bug修复文档<a href="https://rhn.redhat.com/errata/RHSA-2010-0398.html" target="_blank" rel="noopener">https://rhn.redhat.com/errata/RHSA-2010-0398.html</a>。</p>
<ol>
<li>网卡的各种中断方式和区别，以及操作系统对中断的选择</li>
</ol>
<p>1)         网卡中断方式的发展，INTx,MSI,MSI-X</p>
<p>操作系统目前可识别三种类型的中断：</p>
<p>l  传统中断(INTx)－传统或固定中断是指使用早期总线技术的中断。使用这些技术，可通过一个或多个“带外”（即，独立于总线的主线）连线的外部管脚来发送中断信号。较新的总线技术（如 PCI Express）通过带内机制模拟传统中断来维持软件兼容性。主机 OS 将这些模仿中断视为传统中断。</p>
<p>l  消息告知中断－消息告知中断 (message-signalled interrupt, MSI) 使用带内消息而不是使用管脚，可在主桥 (host bridge) 中确定中断的地址。（有关主桥 (host bridge) 的更多信息，请参见<a href="http://download.oracle.com/docs/cd/E19253-01/819-7057/hwovr-22/index.html" target="_blank" rel="noopener">PCI 局部总线</a>。）MSI 可以将数据与中断消息一起发送。每个 MSI 都不是共享的，这样可以保证指定给某一设备的 MSI 在系统中是唯一的。一个 PCI 函数最多可以请求 32 条 MSI 消息。</p>
<p>l  扩展消息告知中断－扩展消息告知中断 (Extended message-signalled interrupt, MSI-X) 是 MSI 的增强版本。MSI-X 中断具有以下新增的优点：</p>
<p>?  支持 2048 条而不是 32 条消息</p>
<p>?  针对每条消息支持独立的消息地址和消息数据</p>
<p>?  支持按消息屏蔽</p>
<p>?  软件分配的向量少于硬件请求的向量时可具有更大灵活性。软件可以在多个 MSI-X 插槽中重用相同的 MSI-X 地址和数据。</p>
<p>2)         MSI中断方式和MSI-X中断方式的区别</p>
<p>看Broadcom的网卡手册看到这样一句：</p>
<p>MSI Version. This is the Message Signaled Interrupts (MSI) version being used. The option MSI corresponds to the PCI 2.2 specification that supports 32 messages and a single MSI address value. The option MSI-X corresponds to the PCI 3.0 specification that supports 2,048 messages and an independent message address for each message.</p>
<p>总算明白了，实际应用场景中，MSI方式的中断对多核cpu的利用情况不佳，网卡中断全部落在某一个cpu上，即使设置cpu affinity也没有作用，而MSI-X中断方式可以自动在多个cpu上分担中断。</p>
<p>3)         Linux中对网卡中断方式的选择</p>
<p>By default, the driver enables MSI if it is supported by the kernel. It runs an interrupt test during initialization to determine if MSI is working. If the test passes, the driver enables MSI. Otherwise, it uses legacy INTx mode.</p>
<p>可以看出，linux中只要网卡支持MSI中断方式，默认都会开启,开机时会探测是否支持MSI，支持就启用，不支持才会使用INTx模式</p>
<p>4)         如何查看系统中网卡工作的中断方式</p>
<p>cat /proc/interrupts有类似如下信息，就可以看出网卡的中断方式</p>
<p>11265195     211176       PCI-MSI-X  eth0-0</p>
<p>54549       7408668       PCI-MSI-X  eth0-1</p>
<p>5)         如何查看网卡的驱动版本信息</p>
<p>ethtool -i eth0</p>
<p>driver: bnx2</p>
<p>version: 1.9.3</p>
<p>firmware-version: 5.2.2 NCSI 2.0.6</p>
<p>bus-info: 0000:10:00.0</p>
<pre><code>modinfo bnx2
</code></pre><p>filename:       /lib/modules/2.6.18-164.el5PAE/kernel/drivers/net/bnx2.ko</p>
<p>version:        1.9.3</p>
<p>license:        GPL</p>
<p>description:    Broadcom NetXtreme II BCM5706/5708/5709/5716 Driver</p>
<p>author:         Michael Chan <a href="mailto:&#109;&#99;&#104;&#97;&#x6e;&#64;&#x62;&#x72;&#x6f;&#x61;&#x64;&#99;&#111;&#109;&#46;&#99;&#111;&#109;" target="_blank" rel="noopener">&#109;&#99;&#104;&#97;&#x6e;&#64;&#x62;&#x72;&#x6f;&#x61;&#x64;&#99;&#111;&#109;&#46;&#99;&#111;&#109;</a></p>
<p>srcversion:     D151EAED8C1037CA480DE9A</p>
<ol start="2">
<li>根据bug文档，网卡中断问题其实于2010-05-06就已经通过升级kernel(升级到kernel-2.6.18-194.3.1以上版本)完成修复了。并且还修复了一个除MSI-X以外的另一个问题。</li>
</ol>
<p>看一下修得的日志，以下引用redhat修复bug文档(部分)。</p>
<p>Important: kernel security and bug fix update</p>
<p>Advisory:</p>
<p>RHSA-2010:0398-1</p>
<p>Type:</p>
<p>Security Advisory</p>
<p>Severity:</p>
<p>Important</p>
<p>Issued on:</p>
<p>2010-05-06</p>
<p>Last updated on:</p>
<p>2010-05-06</p>
<p>Affected Products:</p>
<p>Red Hat Enterprise Linux (v. 5 server)</p>
<p>Red Hat Enterprise Linux Desktop (v. 5 client)</p>
<p>OVAL:</p>
<p>com.redhat.rhsa-20100398.xml</p>
<p>CVEs (cve.mitre.org):</p>
<p>CVE-2010-0307</p>
<p>CVE-2010-0410</p>
<p>CVE-2010-0730</p>
<p>CVE-2010-1085</p>
<p>CVE-2010-1086</p>
<p>Details</p>
<p>Updated kernel packages that fix multiple security issues and several bugs</p>
<p>are now available for Red Hat Enterprise Linux 5.</p>
<p>The Red Hat Security Response Team has rated this update as having</p>
<p>important security impact. Common Vulnerability Scoring System (CVSS) base</p>
<p>scores, which give detailed severity ratings, are available for each</p>
<p>vulnerability from the CVE links in the References section.</p>
<p>The kernel packages contain the Linux kernel, the core of any Linux</p>
<p>operating system.</p>
<p>。。。。</p>
<p>This update fixes the following security issues:</p>
<p>* in certain circumstances, under heavy load, certain network interface</p>
<p>cards using the bnx2 driver and configured to use MSI-X, could stop</p>
<p>processing interrupts and then network connectivity would cease.</p>
<p>(BZ#587799)</p>
<p>* cnic parts resets could cause a deadlock when the bnx2 device was</p>
<p>enslaved in a bonding device and that device had an associated VLAN.</p>
<p>(BZ#581148)</p>
<p>。。。。。。</p>
<p>Users should upgrade to these updated packages, which contain backported</p>
<p>patches to correct these issues. The system must be rebooted for this</p>
<p>update to take effect.</p>
<ol start="3">
<li>以下引用Broadcom Corporation NetXtreme II BCM5709 Gigabit Ethernet网卡驱动程序作者于2010-04-27的修复补丁文档来查看具体修改了驱动中的哪一部分。</li>
</ol>
<p>bnx2: Fix lost MSI-X problem on 5709 NICs</p>
<p>Submitter</p>
<p>Michael Chan（此网卡驱动的作者，modinfo bnx2中可以看得到）</p>
<p>Date</p>
<p>2010-04-27 21:28:09</p>
<p>Message ID</p>
<p><a href="mailto:&#x31;&#50;&#x37;&#x32;&#52;&#48;&#51;&#54;&#57;&#x31;&#45;&#x32;&#x39;&#x33;&#52;&#45;&#49;&#x2d;&#x67;&#x69;&#116;&#45;&#x73;&#101;&#x6e;&#100;&#x2d;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#x2d;&#x6d;&#99;&#x68;&#97;&#x6e;&#x40;&#98;&#114;&#111;&#x61;&#100;&#x63;&#111;&#x6d;&#46;&#x63;&#111;&#x6d;" target="_blank" rel="noopener">&#x31;&#50;&#x37;&#x32;&#52;&#48;&#51;&#54;&#57;&#x31;&#45;&#x32;&#x39;&#x33;&#52;&#45;&#49;&#x2d;&#x67;&#x69;&#116;&#45;&#x73;&#101;&#x6e;&#100;&#x2d;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#x2d;&#x6d;&#99;&#x68;&#97;&#x6e;&#x40;&#98;&#114;&#111;&#x61;&#100;&#x63;&#111;&#x6d;&#46;&#x63;&#111;&#x6d;</a></p>
<p>Comments</p>
<p>Michael Chan - 2010-04-27 21:28:09</p>
<p>It has been reported that under certain heavy traffic conditions in MSI-X</p>
<p>mode, the driver can lose an MSI-X vector causing all packets in the</p>
<p>associated rx/tx ring pair to be dropped.  The problem is caused by</p>
<p>the chip dropping the write to unmask the MSI-X vector by the kernel</p>
<p>(when migrating the IRQ for example).</p>
<p>This can be prevented by increasing the GRC timeout value for these</p>
<p>register read and write operations.</p>
<p>Thanks to Dell for helping us debug this problem.</p>
<p>Signed-off-by: Michael Chan <a href="mailto:&#109;&#x63;&#x68;&#97;&#110;&#64;&#98;&#x72;&#x6f;&#97;&#100;&#99;&#x6f;&#109;&#46;&#99;&#x6f;&#x6d;" target="_blank" rel="noopener">&#109;&#x63;&#x68;&#97;&#110;&#64;&#98;&#x72;&#x6f;&#97;&#100;&#99;&#x6f;&#109;&#46;&#99;&#x6f;&#x6d;</a></p>
<p>---</p>
<p> drivers/net/bnx2.c |    6 +++++-</p>
<p> 1 files changed, 5 insertions(+), 1 deletions(-)</p>
<p>David Miller - 2010-04-27 21:38:25</p>
<p>From: “Michael Chan” <a href="mailto:&#109;&#x63;&#x68;&#97;&#x6e;&#64;&#98;&#x72;&#x6f;&#x61;&#100;&#x63;&#111;&#x6d;&#x2e;&#x63;&#x6f;&#x6d;" target="_blank" rel="noopener">&#109;&#x63;&#x68;&#97;&#x6e;&#64;&#98;&#x72;&#x6f;&#x61;&#100;&#x63;&#111;&#x6d;&#x2e;&#x63;&#x6f;&#x6d;</a></p>
<p>Date: Tue, 27 Apr 2010 14:28:09 -0700</p>
<p>> It has been reported that under certain heavy traffic conditions in MSI-X</p>
<p>> mode, the driver can lose an MSI-X vector causing all packets in the</p>
<p>> associated rx/tx ring pair to be dropped.  The problem is caused by</p>
<p>> the chip dropping the write to unmask the MSI-X vector by the kernel</p>
<p>> (when migrating the IRQ for example).</p>
<blockquote>
</blockquote>
<p>> This can be prevented by increasing the GRC timeout value for these</p>
<p>> register read and write operations.</p>
<blockquote>
</blockquote>
<p>> Thanks to Dell for helping us debug this problem.</p>
<blockquote>
</blockquote>
<p>> Signed-off-by: Michael Chan <a href="mailto:&#x6d;&#x63;&#104;&#97;&#110;&#x40;&#98;&#114;&#111;&#x61;&#x64;&#99;&#111;&#x6d;&#x2e;&#99;&#x6f;&#x6d;" target="_blank" rel="noopener">&#x6d;&#x63;&#104;&#97;&#110;&#x40;&#98;&#114;&#111;&#x61;&#x64;&#99;&#111;&#x6d;&#x2e;&#99;&#x6f;&#x6d;</a></p>
<p>Applied to net-2.6</p>
<p>–</p>
<p>To unsubscribe from this list: send the line “unsubscribe netdev” in</p>
<p>the body of a message to <a href="mailto:majordomo@vger.kernel.org" target="_blank" rel="noopener">majordomo@vger.kernel.org</a></p>
<p>More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html" target="_blank" rel="noopener">http://vger.kernel.org/majordomo-info.html</a></p>
<p>Patch</p>
<p>diff –git a/drivers/net/bnx2.c b/drivers/net/bnx2.c</p>
<p>index a257bab..4c1e51e 100644</p>
<p>--- a/drivers/net/bnx2.c</p>
<p>+++ b/drivers/net/bnx2.c</p>
<p>@@ -4759,8 +4759,12 @@  bnx2_reset_chip(struct bnx2 *bp, u32 reset_code)</p>
<pre><code>        rc = bnx2\_alloc\_bad_rbuf(bp);

}
</code></pre><ul>
<li>if (bp-&gt;flags &amp; BNX2_FLAG_USING_MSIX)</li>
</ul>
<ul>
<li><p>if (bp-&gt;flags &amp; BNX2_FLAG_USING_MSIX) {</p>
<pre><code>bnx2\_setup\_msix_tbl(bp);
</code></pre></li>
</ul>
<p>+                /* Prevent MSIX table reads and write from timing out */</p>
<ul>
<li><p>REG_WR(bp, BNX2_MISC_ECO_HW_CTL,</p>
</li>
<li><p>BNX2_MISC_ECO_HW_CTL_LARGE_GRC_TMOUT_EN);</p>
</li>
<li><p>}</p>
<p> return rc;</p>
<p>}</p>
</li>
</ul>
<ol start="4">
<li><p>经过对redhat5.4的kernel中的网卡驱动部分源码进行确认，确实没有打上此补丁。</p>
</li>
<li><p>现网上之前采用升级到2.0.18c的网卡驱动中，确认驱动源码中也没有打上些补丁，所以现网上把网卡升级到2.0.18c也是无效的。</p>
</li>
<li><p>现redhat对rhel5系列发布的最新修复bug后的kernel为kernel-PAE-2.6.18-194.32.1.el5.i686.rpm，对此kernel的源码进行确认，确认已经打上了补丁。</p>
</li>
<li><p>网卡Broadcom官网上对BCM5709系列网卡的驱动已经更新到bnx2-2.0.23b，通过源码确认，Broadcom官网也已经把此补丁更新到发布的驱动中。</p>
</li>
</ol>
<p>二、      现网处理建议  </p>
<ol>
<li><p>不建议通过关闭msi中断方式解决，原因请看第一部分中的网卡中断方式的区别，即关闭后，网卡中断全部落在某一个cpu上。如果真想关闭msi中断方式，在加载模块时加上disable_msi=1的参数，并加进系统配置文件。</p>
</li>
<li><p>如果条件请允许(因为升级kernel要重启机器才能生效)，建议只升级kernel来解决网卡异常问题，因为升级kernel在解决网卡异常问题时，同时也解决了其中很多的系统bug。而且因为只升级kernel，所以对现网的环境如java,python,gcc等都不会发生改变，请不要直接使用centos源，把系统完全升级，那样的话，系统中python等环境会全部改变，可能会对现网的业务产生冲击。建议使用运维提供的yum升级源(特为此次升级kernel做的内网升级源)进行升级。</p>
</li>
<li><p>如果不具备升级kernel的条件，可以使用编译网卡Broadcom官网发布的最新的驱动将网卡的驱动更新到bnx2-2.0.23b。</p>
</li>
</ol>
<p>三、      现网处理具体步骤  </p>
<ol>
<li><p>关闭msi中断方式，具体参数配置请参考文档中的附件DOC-26837，但不建议关闭。</p>
</li>
<li><p>使用yum升级kernel</p>
</li>
</ol>
<p>1)         运维会提供现网上主要使用的几个操作系统版本的yum源，把运维提供的repo源文件放到/etc/yum.repos.d/下。</p>
<p>如cp rhel-server-5.4-i386.repo /etc/yum.repos.d/</p>
<p>2)         建议把原来/etc/yum.repos.d/下的其中文件备份并移除。</p>
<p>3)         Yum clean all</p>
<p>yum update kernel</p>
<p>Loaded plugins: fastestmirror</p>
<p>Determining fastest mirrors</p>
<p>Cluster                                       | 1.1 kB     00:00    </p>
<p>ClusterStorage                                 | 1.1 kB     00:00    </p>
<p>Server                                        | 1.1 kB     00:00    </p>
<p>Server/primary                                 | 818 kB     00:00    </p>
<p>Server                                                 2293/2293</p>
<p>VT                                            | 1.1 kB     00:00    </p>
<p>Setting up Update Process</p>
<p>Resolving Dependencies</p>
<p>–> Running transaction check</p>
<p>—> Package kernel-PAE.i686 0:2.6.18-194.32.1.el5 set to be installed</p>
<p>–> Finished Dependency Resolution</p>
<p>Dependencies Resolved</p>
<p>===========================================================================</p>
<p> Package        Arch      Version          Repository          Size</p>
<p>===========================================================================</p>
<p>Installing:</p>
<p> kernel-PAE     i686      2.6.18-194.32.1.el5       Server             17 M</p>
<p>Transaction Summary</p>
<p>===========================================================================</p>
<p>Install      1 Package(s)        </p>
<p>Update       0 Package(s)        </p>
<p>Remove       0 Package(s)        </p>
<p>Total download size: 17 M</p>
<p>Is this ok [y/N]: y</p>
<p>Downloading Packages:</p>
<p>kernel-PAE-2.6.18-194.32.1.el5.i686.rpm                   |  17 MB     00:00    </p>
<p>Running rpm_check_debug</p>
<p>Running Transaction Test</p>
<p>Finished Transaction Test</p>
<p>Transaction Test Succeeded</p>
<p>Running Transaction</p>
<p>  Installing     : kernel-PAE                           1/1</p>
<p>Installed:</p>
<p>  kernel-PAE.i686 0:2.6.18-194.32.1.el5                                                                                            </p>
<p>Complete!</p>
<p>4)         cat /boot/grub/grub.conf</p>
<p>default=0</p>
<p>timeout=5</p>
<p>splashimage=(hd0,0)/boot/grub/splash.xpm.gz</p>
<p>hiddenmenu</p>
<p>title CentOS (2.6.18-194.32.1.el5PAE)</p>
<pre><code>root (hd0,0)

kernel /boot/vmlinuz-2.6.18-194.32.1.el5PAE ro root=LABEL=/1 rhgb quiet

initrd /boot/initrd-2.6.18-194.32.1.el5PAE.img
</code></pre><p>title CentOS (2.6.18-164.el5PAE)</p>
<pre><code>root (hd0,0)

kernel /boot/vmlinuz-2.6.18-164.el5PAE ro root=LABEL=/1 rhgb quiet

initrd /boot/initrd-2.6.18-164.el5PAE.img
</code></pre><p>注意查看default是否是配置成最新内核的titile</p>
<ol start="3">
<li>请下载Broadcom官网发布的最新的驱动</li>
</ol>
<p>1)         Wget –c <a href="http://zh-cn.broadcom.com/docs/driver_download/NXII/linux-6.2.23.zip" target="_blank" rel="noopener">http://zh-cn.broadcom.com/docs/driver_download/NXII/linux-6.2.23.zip</a></p>
<p>2)         编译安装</p>
<p>A.        建议使用src包安装</p>
<p>解压并找到linux-6.2.23.zip\Server\Linux\Driver\netxtreme2-6.2.23-1.src.rpm</p>
<p>rpm -ivh netxtreme2-<version>.src.rpm</version></p>
<p>cd /usr/src/redhat</p>
<pre><code>rpmbuild -bb SPECS/netxtreme2.spec

  编译好的RPM包就在RPMS/&lt;arch&gt;/netxtreme2-&lt;version&gt;.&lt;arch&gt;.rpm

   找到自己的版本进行安装如
</code></pre><p>rpm -ivh RPMS/i386/netxtreme2-<version>.i386.rpm</version></p>
<p>B.        使用tar.gz包进行编译安装</p>
<p>tar xvzf netxtreme2-<version>.tar.gz</version></p>
<p>make</p>
<p>make install</p>
<p>3)         重装加载网卡模块</p>
<p>rmmod bnx2;modprobe bnx2</p>
<p>注意执行模块重载会中断几秒钟，正常的话，所有的连接都不会中断。</p>
<p>注意事项：</p>
<ol>
<li><p>建议使用升级kernel方式解决。</p>
</li>
<li><p>不建议关闭msi中断方式。</p>
</li>
<li><p>如果没有使用官网最新的驱动程序进行编译，只能使用源码编译的方式，而且在编译前要先给bnx2.c打path后，再进行编译安装。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/04/02/the-difference-between-dpi-and-ppi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/04/02/the-difference-between-dpi-and-ppi/" itemprop="url">dpi和ppi的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-04-02T16:35:52+08:00">
                2011-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有些人弄混了ppi和dpi的概念！<br>ppi才是是图像分辨率的单位，即pixels per inch，图像ppi值越高，画面的细节就越丰富，因为单位面积的像素数量更多，数码相机出来的图片都是72ppi的分辨率，默认出来就是这么多，拿到Photoshop里面改成300ppi，我认为没有什么实际意义，而且增大了图像的体积，除非你用的是tiff格式，不在乎。<br>dpi是针对于输出设备而言的，指输出分辨率，dots per inch，一般的激光打印机的输出分辨率是300dpi-600dpi，印刷的照排机达到1200dpi-2400dpi。  </p>
<p>ppi和dpi确实是两个概念，但是有些事情是约定成俗的，图片的ppi无法反映这张图片能在冲印店得到的冲印质量，不如你去店里试试看，你问问操作员你的图片是72ppi会得到什么样的冲印质量，多数操作员会一头雾水。<br>在冲印店里我们只用dpi，因为我们拿去的图片必定是为了输出成照片，对于操作人员，他要知道的就是你的图片像素和你所需要印制的尺寸，这两个要素构成了dpi，所以尽管不规范，对于需要冲印的图片我们只有用dpi的大小来沟通。<br>“拿到Photoshop里面改成300ppi，我认为没有什么实际意义，而且增大了图像的体积”这样的改法是固定图像大小（尺寸）下对ppi的修改，它导致了图片像素不真实的扩大，因此导致图片体积的扩大而且图像质量并无改善（多出来的像素都是差值计算出来的），正确的办法是，先按照你所需要扩印的尺寸的比例裁切你的图片，然后固定图片的像素（把“重定义图片的像素”前面的勾去掉）和比例，在“文档大小”里把宽度和高度调整到你所想要的扩印尺寸一致，这时候出来的ppi就是你的图片在这个冲印尺寸下可以得到的dpi，若低于120说明印出来的效果会比较差，120~200说明效果还可以，300是最好的效果，若大于300，先把“重定义图片的像素”前面勾上再修改ppi到300或更低。<br>（注：300dpi是冲印机的极限，大于300ppi的图片将对照片清晰度无任何改善，实际上250就够了，就算你输入大于300ppi的图片文件到冲印机，冲印机也会先把图片计算成300ppi的再进行扩印，另外别小看冲印机的300dpi，冲印机300dpi的照片素质是任何打印设备所无法逾越的）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/03/25/nginx-has-a-413-request-entity-too-large-error-solution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/03/25/nginx-has-a-413-request-entity-too-large-error-solution/" itemprop="url">Nginx出现“413 Request Entity Too Large”错误解决方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-03-25T13:49:55+08:00">
                2011-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天使用Wordpress的flash版文件上传功能的时候，总是提示接口错误，很是郁闷。换小文件发现没有问题，所以问题肯定出现在文件大小上，找了半天没有发现wordpress有限制上传文件大小的地方。</p>
<p>切换到传统文件上传界面，重新上传一个大文件，这回出来错误提示了，413 Request Entity Too Large，google了一下，发现是Nginx的错误提示。</p>
<p>解决方法：打开nginx主配置文件nginx.conf，找到http{}段，添加<br>client_max_body_size 20m;<br>Centos下 vi /usr/local/nginx/conf/nginx.conf</p>
<p>重启NGINX<br>kill -HUP `cat /usr/local/nginx/nginx.pid `<br>恢复正常</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/03/25/how-to-view-the-update-log-of-rpm-package-changelog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/03/25/how-to-view-the-update-log-of-rpm-package-changelog/" itemprop="url">如何查看RPM包的更新日志Changelog</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-03-25T09:49:38+08:00">
                2011-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/默认分类/" itemprop="url" rel="index">
                    <span itemprop="name">默认分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>RPM安装包必须存在，才能执行以下命令。<br>命令： rpm -qpi &lt;rpm包名&gt;  –changelog |more<br># rpm -qi kernel-PAE-2.6.18-194.32.1.el5 –changelog |more<br>Name        : kernel-PAE                   Relocations: (not relocatable)<br>Version     : 2.6.18                            Vendor: CentOS<br>Release     : 194.32.1.el5                  Build Date: Thu 06 Jan 2011 10:41:36 AM CST<br>Install Date: Thu 24 Mar 2011 04:57:37 PM CST      Build Host: builder10.centos.org<br>Group       : System Environment/Kernel     Source RPM: kernel-2.6.18-194.32.1.el5.src.rpm<br>Size        : 46645007                         License: GPLv2<br>Signature   : DSA/SHA1, Thu 06 Jan 2011 08:16:00 PM CST, Key ID a8a447dce8562897<br>URL         : <a href="http://www.kernel.org/" target="_blank" rel="noopener">http://www.kernel.org/</a><br>Summary     : The Linux kernel compiled for PAE capable machines.<br>Description :<br>This package includes a version of the Linux kernel with support for up to<br>64GB of high memory. It requires a CPU with Physical Address Extensions (PAE).<br>The non-PAE kernel can only address up to 4GB of memory.<br>Install the kernel-PAE package if your machine has more than 4GB of memory.<br>* Wed Jan 05 2011 Karanbir Singh &lt;<a href="mailto:kbsingh@centos.org" target="_blank" rel="noopener">kbsingh@centos.org</a>> [2.6.18-194.32.1.el5.centos]<br>* Roll in CentOS Branding</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2011/03/17/comodo-and-cisco-vpn-blue-screen-resolution-rotation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haitian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haitian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/03/17/comodo-and-cisco-vpn-blue-screen-resolution-rotation/" itemprop="url">comodo与cisco vpn蓝屏解决记（转）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-03-17T13:44:22+08:00">
                2011-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/windows/" itemprop="url" rel="index">
                    <span itemprop="name">windows</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转<a href="http://hi.baidu.com/zylyly/blog/item/20f814603dcde7d78cb10d53.html" target="_blank" rel="noopener">http://hi.baidu.com/zylyly/blog/item/20f814603dcde7d78cb10d53.html</a></p>
<p>在家通过VPN连单位网络，是经常的事情，可因种种未知原来，使得每次VPN连接都非常痛苦。从今天开始，终于可告别此痛苦了，为避免更多的朋友经历同样的痛苦，在下面附上解决方案及一些”废话“。<br>-----------------------------------------------<br>很久以前，发现VPN连不上，于是折腾了系统中的各种软件，最后发现与卡巴斯基有关，于是弃卡巴不用。转用“小红伞”。<br>再次很久以前，发觉有必要安装防火墙了，经多次试用，最后选择了“风云”，平时一切使用均正常。可多次出现了蓝屏。。。经多次的蓝屏，发觉都是在使用完cisco vpn后，再连接互联网时发生蓝屏。于是归因于“风云”的不兼容，准备弃之不用，但经试用多种不同的防火墙软件，发觉还是“风云”好用，于是重新装回它，忍受每次vpn后蓝屏的痛苦。  </p>
<p>前几个月前，装 风云2009后，发觉CISCO vpn可连上，但不能访问单位的任何资源，卸载风云2009后，vpn又可正常使用，且vpn后不会蓝屏。于是又归因于”风云“。。。  </p>
<p>昨晚（终于步入正题），需连接vpn，但不能连上，很火，于是下定决心找到”风云“的替代者，昨晚反复试用了”op“”comodo“”风云“到凌晨3点，测试结果是：”comodo、风云“均出现蓝屏，op与vpn可正常使用，但op的英文界面的确有点难受。。。  </p>
<p>今早起床后，继续折腾防火墙，经昨晚试用，发现comodo杀毒挺强的，杀毒与防火墙一体化，觉定用它暂代替”风云+小红伞“。准备忍受与vpn的蓝屏。。。  </p>
<p>可刚才一想，不对呀，那么多防火墙均与cisco vpn出现蓝屏，怎么可能问题都是防火墙的呢？为什么不是cisco vpn呢？是呀，于是又google一下，”根据WinDbg的调试，是由于Cisco VPN安装时自带的ZA的防火墙与XP系统防火墙冲突，导致显卡驱动停止响应。Google后发现的解决方案时从系统目录下删除vsdatant.sys和vsdata.dll两个文件“。赶忙删除vsdatant.sys和vsdata.dll，一试vpn，可正常访问单位资源，断开vpn后，浏览器上网，没有出现”风云“似蓝屏。耶！终于解决了vpn与防火墙的的痛苦。感谢万能的google、感谢万能的网友。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://q1.qlogo.cn/g?b=qq&nk=493654134&s=5"
                alt="haitian" />
            
              <p class="site-author-name" itemprop="name">haitian</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">278</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">164</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">haitian</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
